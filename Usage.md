# Installation #

## With maven ##

If you're using Maven - the POM config is coming soon. Meanwhile, you can just checkout the project from [the repository](http://code.google.com/p/actimo/source/checkout) and use as an Android Library Project.

## Without maven ##

Got to [the downloads secion](http://code.google.com/p/actimo/downloads/list), download the current "Core JAR", and add it to your project.

# Basic usage #

The core public API is only composed of a couple of classes, as shown on the diagram.

![http://wiki.actimo.googlecode.com/git/images/actimo_android_public_API.png](http://wiki.actimo.googlecode.com/git/images/actimo_android_public_API.png)

The workflow is as follows:
  1. You let your activity classes extend FeatureActivity (if you can't do that because of a dependency, [read on](Usage#What_if_I_already_need_my_Activity_to_extend_something?.md)).
  1. In the _initFeatures()_ methods, you call _addFeature()_ for all the features you need, writing/refactoring new ones along the way.
    * Features are executed in the same sequence as they have been added.
    * Keep in mind that you can only have **one** feature of a given type/class registered to an Activity<sup>1</sup>.
    * Note - when overriding methods of FeatureActivity, **always remember to call super.method()**.
  1. The features will be handled automatically.
    * Whenever you need a reference to a registered feature, use the getFeature() method.
      * Avoid depending on another feature's state - nothing will blow up, but this is bad coding practice in general.

# Writing new Features #

To do this, you just make a class that implements the Feature interface. The interface provides most methods of the "on" type that you may override from the base _Activity_ class.

Important points to mention here are:
  * The recommended way for this is to extend _AbstractFeature_, and then only override the methods you need.
  * See the [JavaDoc](http://wiki.actimo.googlecode.com/git/apidocs/index.html) for a list of implemented Features.
  * Every feature stores a reference to its Activity.
  * Additionally, you can override onSetActivity() to run code before onCreate() is called.

# DialogFeature #

The DialogFeature class provides common functionality for features that provide a dialog. You don't need store unique int IDs anymore - you do, however, need to provide an application-wide, unique string ID by overriding the getId() method<sup>2</sup>.

Then you override createDialog() and prepareDialog(), which functions the same as onCreateDialog() and onPrepareDialog(), but doesn't need the int id.

You can access the class instance just like any other one, by using the getFeature() method. Use showDialog() on the feature to launch the dialog.

# What if I already need my Activity to extend something? #

If you're using Eclipse:
  1. Import the [provided template](http://code.google.com/p/actimo/downloads/detail?name=templates.xml&can=2&q=) (Window->Preferences->Java->Editor->Content Assist->Templates, press the import button).
  1. Create a new class with the desired name (e.g. FeaturedMapActivity).
  1. Press Ctrl+A to select the entire text.
  1. Type "feature", and place Ctlr+Space to trigger autocompletion.
  1. Finally, change superclass to conform to what you want.

You should have an activity that reproduces FeatureActivity in function, but extends your desired Activity class. You can now simply extend it and work as normal.

Remember the following
  * Treat the created activity as a generated one. **Do not modify the class**.
  * The class implements a marker interface to ensure compatibility between releases. **When you upgrade to a new version of Actimo, and get compile errors, recreate the classes you've generated from the template**.

If you're not using Eclipse - you can still use the [template](http://code.google.com/p/actimo/downloads/detail?name=templates.xml&can=2&q=) as a basis for the class file.

### Footnotes ###
<sup>1</sup> This is certainly not perfect, but had to be included as a design compromise. It may change in the future.

<sup>2</sup> In the future, this will probably be autogenerated.